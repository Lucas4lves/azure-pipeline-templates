parameters:
  project_key: '' 
  sonar_token: ''
  dockefile_path: ''
  sonar_settings_path: ''
  build_context: ''
  command: 'buildAndPush'
  registry: 'nexus'
  stack: 'dotnet'

stages:
- stage: Stage_1
  displayName: 'Quality'
  jobs:
  - job: Job_1
    displayName: 'SonarQube Analysis on Docker'
    steps:
    - checkout: self
      clean: False
    - task: 'Docker@2'
      displayName: 'Sonar Scanner for dotnet'
      condition: ()
      inputs:
        containerRegistry: ''
        command: ${{ parameters.command }}
        Dockerfile: ${{ parameters.dockerfile_path }}
